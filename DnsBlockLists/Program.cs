using DnsBlockLists;

var builder = WebApplication.CreateBuilder(args);
builder.Services.AddScoped<BlockListService>();

var app = builder.Build();

app.MapGet(
    "/blocklist",
    async (BlockListService service) =>
        string.Join('\n', await service.GetFullBlackList())
);

app.MapGet(
    "/blocklist/refresh",
    (BlockListService service) => service.RefreshCache()
);

await app.RunAsync();